<?xml version="1.0" encoding="UTF-8"?>
<!--Sample XML file generated by XML Spy v4.4 U (http://www.xmlspy.com)-->
<SPEAR-CONFIG xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="spear.xsd">
	<MODULE>
		<NAME>India_NBFC</NAME>
		<PROCESS-ID>NBFC</PROCESS-ID>
		<DESCRIPTION>For Testing</DESCRIPTION>
		<CYCLE-DEPENDENCIES>
			<ASSERTER CLASS="com.cs.sg.spear.core.cycledependency.SystemGCForcer"/>
			<ASSERTER CLASS="com.cs.sg.spear.core.cycledependency.StatsCollector"/>
		</CYCLE-DEPENDENCIES>
		<MODULE-PARAM>
		   <PARAM NAME="spear.semaphore.check" VALUE="false"/>
		   <PARAM NAME="spear.keyassigner" VALUE="com.cs.sg.spear.impl.assigner.RoundRobinKeyAssigner"/>
		   <PARAM NAME="spear.cycle.count" VALUE="1"/>
		   <PARAM NAME="test.test" VALUE="This @@current-date@@ is the test string @@current-date@@ "/>
		</MODULE-PARAM>
	</MODULE>
	<DATA-EXTRACTOR NAME="driver" TYPE="DB">
		<PARAM NAME="query"><![CDATA[select * from IN_SCD_SCHEDULER_DATECARD]]></PARAM>
		<PARAM NAME="resource" VALUE="INSP"/>
		<PARAM NAME="fetch.size" VALUE="10"/>
		<PARAM NAME="result.wrap" VALUE="disconnected"/>
	</DATA-EXTRACTOR>
	
	<DATA-TRANSFORMER NAME="fitTransform" TYPE="scriptlet-mvel" POOL-SIZE="150" THREAD-COUNT="10">
		<PARAM NAME="script.input" VALUE="inline"/>
		<PARAM NAME="script.value"><![CDATA[
			import java.text.SimpleDateFormat;
			import com.cs.sg.spear.core.vo.MessageHolder;

			//rs=context.getDataProviderElement("dtcard").getData();
			rs=dataset.getLookupResult("datelkup");
			rs1=dataset.getLookupResult("datelkup1");
			rs2=dataset.getLookupResult("clobtest1");
			rr=rs.getFirstRow();
			dt = new SimpleDateFormat("yyyyMMdd").format(dataset.getDriverRow().getDate("SCD_CURRENT_DATE"));
			//System.out.println(dt+"<:>"+rr.getValue("cbd")+"->"+dt.equals(rr.getValue("cbd"))+"->"+rs1.getRowCount());
			//System.out.println("Invalid Trade:"+rs2.getFirstRow().getValue("originalmessage"));
			dataout.addMessageHolder("error.q",new MessageHolder(rs2.getFirstRow().getValue("originalmessage"),null));


		]]></PARAM>
	</DATA-TRANSFORMER>

	<DATA-WRITERS ON-ERROR="ignore" THREAD-COUNT="10">
		<WRITER NAME="spearq" TYPE="TEST">
			<PARAM NAME="key.name" VALUE="error.q"/>
			<PARAM NAME="destination.name" VALUE="JMSTEST@spear.test.Queue"/>
		</WRITER>
		<WRITER NAME="tibq" TYPE="TEST">
			<PARAM NAME="key.name" VALUE="error.q"/>
			<PARAM NAME="destination.name" VALUE="TIB@SAJI.TEST"/>
		</WRITER>
		<WRITER NAME="filebackout" TYPE="TEST" >
			<PARAM NAME="file.close.event" VALUE="end.app"/>
			<PARAM NAME="file.path" VALUE="c:/app/temp"/>
			<PARAM NAME="file.name" VALUE="ins.txt"/>
			<PARAM NAME="all.or.none" VALUE="true"/>		
			<PARAM NAME="async.write" VALUE="true"/>		
			<PARAM NAME="file.output" VALUE="single"/>		
			<PARAM NAME="flush.type" VALUE="request"/>
			<PARAM NAME="body.row" VALUE="${clobtest1$originalmessage}"/>
			<PARAM NAME="body.row1"><![CDATA[${driver$ACS_ID},${driver$ACS_CNTR_PARTY_ID},${driver$ACS_FEE_TYPE_ID},${driver$ACS_CURR_ID},${driver$ACS_BOOK_ID},${driver$ACS_ENTITY_ID},${driver$ACS_PERIOD_EN_DATE},${driver$ACS_ACCRUAL_TYPE},${driver$ACS_AMT},${driver$ACS_INV_ID},${driver$ACS_CREATE_BY},${driver$ACS_CREATE_DATETIME},${driver$ACS_VERIFY_BY},${driver$ACS_MOD_BY},${driver$ACS_VERIFY_DATETIME},${driver$ACS_MOD_DATETIME},${driver$ACS_STATUS},${driver$ACS_VERIFY_REMARKS},${driver$ACS_VERIFY_STATUS},${driver$ACS_SOURCE},${driver$ACS_POST_ID},${driver$ACS_JRNL_LIN_REF}]]></PARAM>
		</WRITER>
	</DATA-WRITERS>
	
	<RESOURCES>
		<RESOURCE NAME="CSAR" TYPE="DB" LOAD-PRIORITY="2" UNLOAD-PRIORITY="1">
			<PARAM NAME="driver.classname" VALUE="oracle.jdbc.OracleDriver"/>
			<PARAM NAME="connection.url" VALUE="jdbc:oracle:thin:@sgs75h-090d.sg.csfb.com:1521:QSGCSAR1"/>
			<PARAM NAME="user.name" VALUE="odsadm"/>
			<PARAM NAME="password" VALUE="changi2oo6"/>
			<PARAM NAME="pool.size" VALUE="10"/>
			<PARAM NAME="pool.on.start" VALUE="false"/>
			<PARAM NAME="max.wait" VALUE="5000"/>
			<PARAM NAME="default.autocommit" VALUE="true"/>
		</RESOURCE>
		<RESOURCE NAME="INSP" TYPE="DB" LOAD-PRIORITY="1" UNLOAD-PRIORITY="1">
			<PARAM NAME="driver.classname" VALUE="oracle.jdbc.OracleDriver"/>
			<PARAM NAME="connection.url" VALUE="jdbc:oracle:thin:@(description=(address_list= (address=(host=DSGINS51) (protocol=tcp)(port=1522))(address=(host=DSGINS52)(protocol=tcp) (port=1522)) (load_balance=no)(failover=yes))(connect_data=(service_name= DSGINS50.WORLD)))"/>
			<PARAM NAME="user.name" VALUE="inspire_dev"/>
			<PARAM NAME="password" VALUE="inspire_dev"/>
			<PARAM NAME="pool.size" VALUE="10"/>
			<PARAM NAME="pool.on.start" VALUE="false"/>
			<PARAM NAME="max.wait" VALUE="5000"/>
			<PARAM NAME="default.autocommit" VALUE="true"/>
		</RESOURCE>
		<RESOURCE NAME="JMSTEST" TYPE="JMS" LOAD-PRIORITY="3" UNLOAD-PRIORITY="1">
			<PARAM NAME="jms.type" VALUE="queue"/>
			<PARAM NAME="context" VALUE="localCtx"/>
			<PARAM NAME="connection.factory" VALUE="inspire.queueconnectionfactory"/>
			<PARAM NAME="session.transacted" VALUE="true"/>
			<PARAM NAME="message.ack.type" VALUE="auto"/>
		</RESOURCE>
		<RESOURCE NAME="localCtx" TYPE="CONTEXT" LOAD-PRIORITY="1" UNLOAD-PRIORITY="3">
			<PARAM NAME="provider.url" VALUE="t3://localhost:7001"/>
			<PARAM NAME="initialcontext.factoy" VALUE="weblogic.jndi.WLInitialContextFactory"/>
		</RESOURCE>
		<RESOURCE NAME="TIB" TYPE="JMS" LOAD-PRIORITY="3" UNLOAD-PRIORITY="1">
			<PARAM NAME="jms.type" VALUE="queue"/>
			<PARAM NAME="context" VALUE="tibcoctx"/>
			<PARAM NAME="connection.factory" VALUE="saji"/>
			<PARAM NAME="secure.connection" VALUE="true"/>
			<PARAM NAME="session.transacted" VALUE="true"/>
			<PARAM NAME="message.ack.type" VALUE="auto"/>
		</RESOURCE>
		<RESOURCE NAME="tibcoctx" TYPE="CONTEXT" LOAD-PRIORITY="1" UNLOAD-PRIORITY="3">
			<PARAM NAME="provider.url" VALUE="tibjmsnaming://sgs45d-093.sg.csfb.com:17012"/>
			<PARAM NAME="initialcontext.factoy" VALUE="com.tibco.tibjms.naming.TibjmsInitialContextFactory"/>
			<PARAM NAME="security.principal" VALUE="vsaji"/>
			<PARAM NAME="security.credentials" VALUE="vsaji"/>
		</RESOURCE>
	</RESOURCES>	
	<DATA-PROVIDERS>
		  <DATA-PROVIDER NAME="datecard" TYPE="DB">
		   <PARAM NAME="query"><![CDATA[select '012008' as CURR_DATE from dual]]></PARAM>
		   <PARAM NAME="resource" VALUE="INSP"/>
		   <PARAM NAME="fetch.size" VALUE="1"/>
		   <PARAM NAME="result.wrap" VALUE="disconnected"/>
			<PARAM NAME="cache.type" VALUE="begin.app"/>
		  </DATA-PROVIDER>
		  <DATA-PROVIDER NAME="currency" TYPE="DB">
		   <PARAM NAME="query"><![CDATA[select * from IN_CUR_CURRENCY where CUR_CODE='EUR']]></PARAM>
		   <PARAM NAME="resource" VALUE="INSP"/>
		   <PARAM NAME="fetch.size" VALUE="1"/>
		   <PARAM NAME="result.wrap" VALUE="disconnected"/>
			<PARAM NAME="cache.type" VALUE="begin.app"/>
		  </DATA-PROVIDER>
		  <DATA-PROVIDER NAME="dtcard" TYPE="DB">
		   <PARAM NAME="query"><![CDATA[
		   PKG_TEST.proc_get_business_date(${driver$SCD_REGION_CODE},${driver$SCD_MODULE},'ALL',${driver$SCD_DATE_TYPE},${sp.out})
		   ]]></PARAM>
		   <PARAM NAME="resource" VALUE="INSP"/>
		   <PARAM NAME="fetch.size" VALUE="1"/>
		   <PARAM NAME="result.wrap" VALUE="disconnected"/>
		   <PARAM NAME="sp.out.param" VALUE="4:VARCHAR:cbd"/>
		</DATA-PROVIDER>
		  <DATA-PROVIDER NAME="dtcard1" TYPE="DB">
		   <PARAM NAME="query"><![CDATA[select * from IN_SCD_SCHEDULER_DATECARD where SCD_REGION_CODE=${driver$SCD_REGION_CODE}]]></PARAM>
		   <PARAM NAME="resource" VALUE="INSP"/>
		   <PARAM NAME="fetch.size" VALUE="0"/>
		   <PARAM NAME="result.wrap" VALUE="disconnected"/>
		   <PARAM NAME="cache.type" VALUE="incremental"/>
		</DATA-PROVIDER>
		  <DATA-PROVIDER NAME="clobtest" TYPE="DB">
		   <PARAM NAME="query"><![CDATA[select * from invalidtrade where fointrlid='J:20081225:92480041:3:1']]></PARAM>
		   <PARAM NAME="resource" VALUE="CSAR"/>
		   <PARAM NAME="fetch.size" VALUE="0"/>
		   <PARAM NAME="result.wrap" VALUE="disconnected"/>
			<PARAM NAME="cache.type" VALUE="incremental"/>
		</DATA-PROVIDER>
	</DATA-PROVIDERS>
	<DATA-LOOKUP>				
		<LOOKUP NAME="clobtest1"	DATA-PROVIDER="clobtest"/>
		<LOOKUP NAME="datelkup"	DATA-PROVIDER="dtcard"/>
		<LOOKUP NAME="datelkup1"	DATA-PROVIDER="dtcard1"/>
	</DATA-LOOKUP>				
	<EXCEPTION-HANDLER>
		<HANDLER CLASS="com.cs.sg.spear.core.exception.SpearExceptionHandler" NAME="default.exception.handler"/>
		<HANDLE EXCEPTION="com.cs.sg.spear.core.exception.EventNotifierException" HANDLER="default.exception.handler">
			<ERROR CODE="DBINIT_EA_SQL_EXP" VALUE="" TYPE="fatal"/>
			<ERROR CODE="SEMAPHORE_BA_LOCKED" VALUE="" TYPE="fatal"/>
			<ERROR CODE="SEMAPHORE_UNKNOWN" VALUE="" TYPE="fatal"/>
			<ERROR CODE="SEMAPHORE_BA_PROVIDER_NOT_FOUND" VALUE="" TYPE="fatal"/>
		</HANDLE>
		<HANDLE EXCEPTION="com.cs.sg.spear.core.exception.InitializationException" HANDLER="default.exception.handler">
			<ERROR CODE="TOKEN_DBPARAM_EXIST" VALUE="" TYPE="ignore"/>
			<ERROR CODE="APP_INITIALIZATION_EXP" VALUE="" TYPE="fatal"/>
			<ERROR CODE="LOCALJMS_INIT_EXP" VALUE="" TYPE="ignore"/>
		</HANDLE>
		<HANDLE EXCEPTION="com.cs.sg.spear.core.exception.SpearRuntimeException" HANDLER="default.exception.handler">
			<ERROR CODE="FILE_NOT_ARRIVED" VALUE="" TYPE="fatal"/>
		</HANDLE>
		<HANDLE EXCEPTION="java.sql.SQLException" HANDLER="default.exception.handler">
			<ERROR CODE="any" VALUE="Invalid column name" TYPE="fatal"/>
			<ERROR CODE="any" VALUE="invalid identifier" TYPE="ignore"/>
			<ERROR CODE="00001" VALUE="unique constraint" TYPE="fatal"/>
		</HANDLE>
		<HANDLE EXCEPTION="com.cs.sg.spear.core.exception.ValidatorException" HANDLER="default.exception.handler">
			<ERROR CODE="INVALID_FILE" VALUE="" TYPE="fatal"/>
		</HANDLE>
		<HANDLE EXCEPTION="com.cs.sg.spear.core.exception.ResourceException" HANDLER="default.exception.handler">
			<ERROR CODE="SQL_EXCEPTION_CON" VALUE="" TYPE="fatal"/>
			<ERROR CODE="DB_DATASOURCE_CREATION" VALUE="" TYPE="fatal"/>
			<ERROR CODE="DB_BATCH_NOT_SUPPORT" VALUE="" TYPE="fatal"/>
		</HANDLE>
	</EXCEPTION-HANDLER>
</SPEAR-CONFIG>