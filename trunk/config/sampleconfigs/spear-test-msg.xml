<?xml version="1.0" encoding="UTF-8"?>
<!--Sample XML file generated by XML Spy v4.4 U (http://www.xmlspy.com)-->
<SPEAR-CONFIG xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="C:\app\DB-FOBOCA\schema\spear_NEW.xsd">
	<MODULE>
		<NAME>Test Application</NAME>
		<DESCRIPTION>For Testing</DESCRIPTION>
		<CYCLE-DEPENDENCIES>
			<ASSERTER CLASS="com.cs.sg.spear.core.cycledependency.ShutdownTimeCheckDependant"/>
			<ASSERTER CLASS="com.cs.sg.spear.core.cycledependency.EndCycleCheckDependant"/>
			<ASSERTER CLASS="com.cs.sg.spear.core.cycledependency.ProcessTerminationCheckDependant"/>
			<ASSERTER CLASS="com.cs.sg.spear.core.cycledependency.CycleCountCheckDependant"/>
			<ASSERTER CLASS="com.cs.sg.spear.core.cycledependency.SystemGCForcer"/>
			<ASSERTER CLASS="com.cs.sg.spear.core.cycledependency.StatsCollector"/>
		</CYCLE-DEPENDENCIES>
		<MODULE-PARAM>
		   <PARAM NAME="spear.semaphore.check" VALUE="false"/>
		   <PARAM NAME="spear.keyassigner" VALUE="com.cs.sg.spear.impl.assigner.RoundRobinKeyAssigner"/>
		   <PARAM NAME="spear.process.name" VALUE="TEST_SPEAR_T"/>
		   <PARAM NAME="spear.cycle.interval" VALUE="10000"/>
  		   <PARAM NAME="spear.shutdown.format" VALUE="HH:mm"/>
		   <PARAM NAME="spear.shutdown" VALUE="16:04"/>
		   <PARAM NAME="driver.primary.keys" VALUE="INV_ID"/>
		   <PARAM NAME="spear.cycle.count" VALUE="0"/>

		</MODULE-PARAM>
	</MODULE>
	
	<DATA-EXTRACTOR NAME="extractor" CLASS="com.cs.sg.spear.impl.extractor.jms.JMSDataExtractor">
		<PARAM NAME="message.listener" VALUE="com.cs.sg.spear.impl.extractor.jms.TestMessageListener"/>
		<PARAM NAME="message.store.type" VALUE="file"/>
		<PARAM NAME="message.store.source" VALUE="C:/app/spearnew/test/msg_store"/>
		<PARAM NAME="destination.name" VALUE="LOCALJMS@spear.test.Queue"/>
		<PARAM NAME="deadletter.queue" VALUE="LOCALJMS@errorJNDI"/>	
		<PARAM NAME="column.definition" VALUE="csvcoldef.xml"/>
		<PARAM NAME="consumer.count" VALUE="5"/>
	</DATA-EXTRACTOR>

	<DATA-TRANSFORMER NAME="fitTransform" CLASS="com.cs.sg.spear.impl.transformer.TemplateBasedTransformer" POOL-SIZE="150" THREAD-COUNT="5" >
		<PARAM NAME="template.type" VALUE="string"/>
		<PARAM NAME="placeholder" VALUE="object"/>	
		<PARAM NAME="template.value" VALUE="${driver$INV_ID},${driver$INV_BRO_REF_NO},${cnp$CNP_NAME},${ent$ENT_CODE},${driver$INV_INVOICE_DATE},${driver$INV_TRADE_MONTH},${ccy$CUR_CODE},${driver$INV_AMOUNT},${driver$INV_SETTLE_DATE},${driver$INV_OWNER},${driver$INV_INVOICE_TYPE},${driver$INV_BUSINESS_STATUS},${driver$INV_RCVD_DATE},${driver$INV_ORG_INV_ID},${driver$INV_USER_FILE_NAME},${driver$INV_SYSTEM_FILE_NAME},${driver$INV_FILE_TYPE},${driver$INV_CREATE_BY},${driver$INV_CREATE_DATETIME},${driver$INV_CREATE_REMARKS},${driver$INV_MOD_BY},${driver$INV_MOD_DATETIME},${driver$INV_VERIFY_BY},${driver$INV_VERIFY_DATETIME},${driver$INV_VERIFY_REMARKS}"/>
		<PARAM NAME="ignore.null" VALUE="true"/>
		<PARAM NAME="replace.null.with" VALUE=""/>
		<PARAM NAME="rejection.report.type" VALUE="file"/>
		<PARAM NAME="rejection.report.source" VALUE="C:/app/spearnew/test/csv/report"/>
	</DATA-TRANSFORMER>
	<DATA-WRITERS ON-ERROR="ignore" THREAD-COUNT="5">
        <WRITER NAME="filewrite" CLASS="com.cs.sg.spear.impl.writer.FileWriter" >
			<PARAM NAME="single.reference" VALUE="false"/>
			<PARAM NAME="file.close.event" VALUE="end.application"/>
			<PARAM NAME="file.path" VALUE="C:/app/spearnew/test/csv/src"/>
			<PARAM NAME="file.name" VALUE="NEW_TEST.csv"/>
			<PARAM NAME="all.or.none" VALUE="true"/>		
			<PARAM NAME="async.write" VALUE="true"/>		
			<PARAM NAME="file.output" VALUE="single"/>		
			<PARAM NAME="header.row.1" VALUE="HEADER,TEST,${CURRENT_DATE#yyyyddMM}"/>		
			<PARAM NAME="header.row.2" VALUE="INV_BRO_REF_NO,INV_AMOUNT,INV_INVOICE_DATE,INV_TRADE_MONTH"/>		
			<PARAM NAME="footer.row" VALUE="FOOTER,${RECORD_COUNT}"/>		
			<PARAM NAME="flush.type" VALUE="request"/>
			<PARAM NAME="key.name" VALUE="fitTransform"/>
		</WRITER>
	</DATA-WRITERS>
	<RESOURCES>
		<RESOURCE NAME="DSGINS50" TYPE="DB" LOAD-PRIORITY="2" UNLOAD-PRIORITY="1">
			<PARAM NAME="driverClassName" VALUE="oracle.jdbc.OracleDriver"/>
			<PARAM NAME="connectionUrl" VALUE="jdbc:oracle:thin:@(description=(address_list= (address=(host=DSGINS51.sg.csfb.com) (protocol=tcp)(port=1522))(address=(host=DSGINS52.sg.csfb.com)(protocol=tcp) (port=1522)) (load_balance=no)(failover=yes))(connect_data=(service_name= DSGINS50.WORLD)))"/>
			<PARAM NAME="userName" VALUE="inspire_dev"/>
			<PARAM NAME="password" VALUE="inspire_dev"/>
			<PARAM NAME="poolSize" VALUE="25"/>
			<PARAM NAME="poolOnStart" VALUE="true"/>
			<PARAM NAME="maxWait" VALUE="5000"/>
			<PARAM NAME="defaultAutoCommit" VALUE="true"/>
		</RESOURCE>
		<RESOURCE NAME="DSGINS40" TYPE="DB" LOAD-PRIORITY="2" UNLOAD-PRIORITY="1">
			<PARAM NAME="driverClassName" VALUE="oracle.jdbc.OracleDriver"/>
			<PARAM NAME="connectionUrl" VALUE="jdbc:oracle:thin:@(description=(address_list= (address=(host=DSGINS41.sg.csfb.com) (protocol=tcp)(port=1522))(address=(host=DSGINS42.sg.csfb.com)(protocol=tcp) (port=1522)) (load_balance=no)(failover=yes))(connect_data=(service_name= DSGINS40.WORLD)))"/>
			<PARAM NAME="userName" VALUE="inspire_dev"/>
			<PARAM NAME="password" VALUE="inspire_dev"/>
			<PARAM NAME="poolSize" VALUE="25"/>
			<PARAM NAME="poolOnStart" VALUE="true"/>
			<PARAM NAME="maxWait" VALUE="5000"/>
			<PARAM NAME="defaultAutoCommit" VALUE="true"/>
		</RESOURCE>
		<RESOURCE NAME="LOCALJMS" TYPE="JMS" LOAD-PRIORITY="4" UNLOAD-PRIORITY="4">
			<PARAM NAME="jms.type" VALUE="queue"/>
			<PARAM NAME="provider.url" VALUE="t3://localhost:7001"/>
			<PARAM NAME="initialcontext.factoy" VALUE="weblogic.jndi.WLInitialContextFactory"/>
			<PARAM NAME="connection.factory" VALUE="inspire.queueconnectionfactory"/>
			<PARAM NAME="session.transacted" VALUE="true"/>
			<PARAM NAME="message.ack.type" VALUE="auto"/>
		</RESOURCE>
		<RESOURCE NAME="SYBASE" TYPE="DB" LOAD-PRIORITY="3" UNLOAD-PRIORITY="1">
			<PARAM NAME="driverClassName" VALUE="com.sybase.jdbc.SybDriver"/>
			<PARAM NAME="connectionUrl" VALUE="jdbc:sybase:Tds:167.168.148.202:2325/DSGOPPOET11/amm_db"/>
		    <PARAM NAME="userName" VALUE="amm_u"/>
		    <PARAM NAME="password" VALUE="58D0B75A60A57EC6B789736223F8BB"/>
			<PARAM NAME="poolSize" VALUE="25"/>
			<PARAM NAME="maxWait" VALUE="5000"/>
			<PARAM NAME="defaultAutoCommit" VALUE="true"/>
		</RESOURCE>
		<RESOURCE NAME="SPEAR_CACHE" TYPE="DB" LOAD-PRIORITY="3" UNLOAD-PRIORITY="1">
			<PARAM NAME="driverClassName" VALUE="org.h2.Driver"/>
			<PARAM NAME="connectionUrl" VALUE="jdbc:h2:mem:spear"/>
		    <PARAM NAME="userName" VALUE="amm_u"/>
		    <PARAM NAME="password" VALUE="58D0B75A60A57EC6B789736223F8BB"/>
			<PARAM NAME="poolSize" VALUE="10"/>
			<PARAM NAME="maxWait" VALUE="5000"/>
			<PARAM NAME="poolOnStart" VALUE="true"/>
			<PARAM NAME="defaultAutoCommit" VALUE="true"/>
		</RESOURCE>
	</RESOURCES>
<SERVICES>
		<SERVICE NAME="semaphore" CLASS="com.cs.sg.spear.impl.services.DBSemaphoreService" CYCLE-NOTIFICATION="true" APP-NOTIFICATION="true" DEPENDS="s1">
			<PARAM NAME="check.status" VALUE="semaphore_select"/>
			<PARAM NAME="update.status" VALUE="semaphore_update"/>			
			<PARAM NAME="pre.start.status" VALUE="C"/>
			<PARAM NAME="post.start.status" VALUE="P"/>
			<PARAM NAME="end.status" VALUE="C"/>
			<PARAM NAME="termination.status" VALUE="K"/>
		</SERVICE>
		<SERVICE NAME="s1" CLASS="com.cs.sg.spear.core.services.TestService" CYCLE-NOTIFICATION="true" APP-NOTIFICATION="true"/>
	</SERVICES>	
	<DATA-PROVIDERS>
		<DATA-PROVIDER NAME="dbtest" TYPE="DB">
			<QUERY><![CDATA[select * from br_inv_invoice]]></QUERY>
			<PARAM NAME="resource" VALUE="DSGINS50"/>
			<PARAM NAME="fetch.size" VALUE="0"/>
			<PARAM NAME="result.wrap" VALUE="discconnected"/>
		</DATA-PROVIDER>
		<DATA-PROVIDER NAME="entity" TYPE="CSV">
			<PARAM NAME="result.wrap" VALUE="disconnected"/>
			<PARAM NAME="file.path" VALUE="C:/app/spearnew/test/csv/src"/>
			<PARAM NAME="file.name" VALUE="entity.csv"/>
			<PARAM NAME="file.delimiter" VALUE="comma"/>
			<PARAM NAME="column.definition" VALUE="file"/>
			<PARAM NAME="column.definition.value" VALUE="csvcoldef.xml"/>
			<PARAM NAME="start.line.number" VALUE="1"/>
			<PARAM NAME="validation.required" VALUE="false"/>
			<PARAM NAME="rejection.report.type" VALUE="file"/>
			<PARAM NAME="rejection.report.source" VALUE="C:/app/spearnew/test/csv/report"/>
			<PARAM NAME="post.process" VALUE="ignore"/>
			<PARAM NAME="wait.for.file" VALUE="false"/>
			<PARAM NAME="cache.type" VALUE="begin.app"/>
			<PARAM NAME="cache.index.columns" VALUE="ENT_ID"/>
		</DATA-PROVIDER>
		<DATA-PROVIDER NAME="currency" TYPE="DB">
			<QUERY><![CDATA[ select * from IN_CUR_CURRENCY]]></QUERY>
			<PARAM NAME="cache.type" VALUE="begin.app"/>
			<PARAM NAME="resource" VALUE="DSGINS50"/>
			<PARAM NAME="fetch.size" VALUE="0"/>
			<PARAM NAME="result.wrap" VALUE="connected"/>
			<PARAM NAME="cache.index.columns" VALUE="CUR_ID"/>
		</DATA-PROVIDER>
		<DATA-PROVIDER NAME="counterparty" TYPE="DB">
			<QUERY><![CDATA[ select * from IN_CNP_CNTR_PARTY where CNP_CNTR_PARTY_TYPE='Broker' ]]></QUERY>
			<PARAM NAME="cache.type" VALUE="begin.app"/>
			<PARAM NAME="resource" VALUE="DSGINS50"/>
			<PARAM NAME="result.wrap" VALUE="connected"/>
			<PARAM NAME="cache.index.columns" VALUE="CNP_ID"/>
		</DATA-PROVIDER>
		<DATA-PROVIDER NAME="nostro" TYPE="DB">
			<QUERY><![CDATA[ select * from IN_NOS_NOSTRO where NOS_ID=6543]]></QUERY>
			<PARAM NAME="cache.type" VALUE="begin.cycle"/>
			<PARAM NAME="resource" VALUE="DSGINS50"/>
			<PARAM NAME="result.wrap" VALUE="connected"/>
		</DATA-PROVIDER>
		<DATA-PROVIDER NAME="paymentmessage" TYPE="DB">
			<QUERY><![CDATA[ select * from IN_PAM_PAYMENT_MESSAGE]]></QUERY>
			<PARAM NAME="cache.type" VALUE="begin.app"/>
			<PARAM NAME="resource" VALUE="DSGINS50"/>
			<PARAM NAME="result.wrap" VALUE="connected"/>
		</DATA-PROVIDER>
		<DATA-PROVIDER NAME="country" TYPE="DB">
			<QUERY><![CDATA[ select * from IN_COU_COUNTRY where COU_REGION_CODE='${ent$ENT_REGION_CODE}']]></QUERY>
			<PARAM NAME="resource" VALUE="DSGINS50"/>
			<PARAM NAME="result.wrap" VALUE="connected"/>
		</DATA-PROVIDER>
		<DATA-PROVIDER NAME="semaphore_select" TYPE="DB">
			<QUERY><![CDATA[ select state from amm_db..LastProcessInfo where processId='TEST_SPEAR_T' ]]></QUERY>
			<PARAM NAME="resource" VALUE="SYBASE"/>
		</DATA-PROVIDER>
		<DATA-PROVIDER NAME="semaphore_update" TYPE="DB">
			<QUERY><![CDATA[ update amm_db..LastProcessInfo set state=? where processId='TEST_SPEAR_T' ]]></QUERY>
			<PARAM NAME="resource" VALUE="SYBASE"/>
		</DATA-PROVIDER>
	</DATA-PROVIDERS>
<DATA-LOOKUP>
		<LOOKUP NAME="ccy"  DATA-PROVIDER="currency">
			<FILTER><![CDATA[
				CUR_ID=${driver$INV_CCY_ID}
				]]>
			</FILTER>
		</LOOKUP>
		<LOOKUP NAME="ent" DATA-PROVIDER="entity">
			<FILTER><![CDATA[
				ENT_ID=${driver$INV_ENTITY_ID}
				]]>
			</FILTER>
		</LOOKUP>
		<LOOKUP NAME="cnp" DATA-PROVIDER="counterparty">
			<FILTER><![CDATA[
				CNP_ID=${driver$INV_BROKER_ID}
				]]>
			</FILTER>
		</LOOKUP>
	</DATA-LOOKUP>
	<EXCEPTION-HANDLER>
		<HANDLER CLASS="com.cs.sg.spear.core.exception.SpearExceptionHandler" NAME="default.exception.handler"/>
		<HANDLE EXCEPTION="com.cs.sg.spear.core.exception.EventNotifierException" HANDLER="default.exception.handler">
			<ERROR CODE="DBINIT_EA_SQL_EXP" VALUE="" TYPE="fatal"/>
			<ERROR CODE="SEMAPHORE_BA_LOCKED" VALUE="" TYPE="fatal"/>
			<ERROR CODE="SEMAPHORE_UNKNOWN" VALUE="" TYPE="fatal"/>
			<ERROR CODE="SEMAPHORE_BA_PROVIDER_NOT_FOUND" VALUE="" TYPE="fatal"/>
			<ERROR CODE="MQ_INIT_BEGIN_APP_JMS_EXP" VALUE="" TYPE="fatal"/>
			<ERROR CODE="MQ_INIT_BEGIN_APP_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="JMS_INIT_BEGIN_APP_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="SEMAPHORE_EA_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="CACHE_PROVIDER_BA_DATA_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="CACHE_PROVIDER_BA_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="CACHE_PROVIDER_EC_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="CACHE_PROVIDER_EC_DATA_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="CACHE_PROVIDER_BC_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="CACHE_PROVIDER_BC_DATA_EXP" VALUE="" TYPE="ignore"/>
		</HANDLE>
		<HANDLE EXCEPTION="com.cs.sg.spear.core.exception.InitializationException" HANDLER="default.exception.handler">
			<ERROR CODE="TOKEN_DBPARAM_EXIST" VALUE="" TYPE="ignore"/>
			<ERROR CODE="APP_INITIALIZATION_EXP" VALUE="" TYPE="fatal"/>
			<ERROR CODE="DB_INIT_BEGIN_APP_SQL_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="DB_INIT_BEGIN_APP_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="MANDATORY_PARAM_MISSING" VALUE="" TYPE="ignore"/>
			<ERROR CODE="MW_SESSION_EX" VALUE="" TYPE="fatal"/>
			<ERROR CODE="MORE_THAN_ONE_MATCH" VALUE="" TYPE="fatal"/>
		</HANDLE>
		<HANDLE EXCEPTION="com.cs.sg.spear.core.exception.SpearRuntimeException" HANDLER="default.exception.handler">
			<ERROR CODE="FILE_NOT_ARRIVED" VALUE="" TYPE="fatal"/>
		</HANDLE>
		<HANDLE EXCEPTION="com.cs.sg.spear.core.exception.ValidatorException" HANDLER="default.exception.handler">
			<ERROR CODE="INVALID_FILE" VALUE="" TYPE="fatal"/>
		</HANDLE>
		<HANDLE EXCEPTION="com.cs.sg.spear.core.exception.ResourceException" HANDLER="default.exception.handler">
			<ERROR CODE="SQL_EXCEPTION_CON" VALUE="" TYPE="fatal"/>
			<ERROR CODE="DB_DATASOURCE_CREATION" VALUE="" TYPE="fatal"/>
			<ERROR CODE="DB_BATCH_NOT_SUPPORT" VALUE="" TYPE="fatal"/>
		</HANDLE>
	</EXCEPTION-HANDLER>
</SPEAR-CONFIG>
