<?xml version="1.0" encoding="UTF-8"?>
<!--Sample XML file generated by XML Spy v4.4 U (http://www.xmlspy.com)-->
<SPEAR-CONFIG xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="C:\app\DB-FOBOCA\schema\spear_NEW.xsd">
	<MODULE>
		<NAME>Test Application</NAME>
		<DESCRIPTION>For Testing</DESCRIPTION>
		<CYCLE-DEPENDENCIES>
			<ASSERTER CLASS="com.cs.sg.spear.core.cycledependency.ShutdownTimeCheckDependant"/>
			<ASSERTER CLASS="com.cs.sg.spear.core.cycledependency.EndCycleCheckDependant"/>
			<ASSERTER CLASS="com.cs.sg.spear.core.cycledependency.ProcessTerminationCheckDependant"/>
			<ASSERTER CLASS="com.cs.sg.spear.core.cycledependency.CycleCountCheckDependant"/>
		</CYCLE-DEPENDENCIES>
		<MODULE-PARAM>
		   <PARAM NAME="spear.semaphore.check" VALUE="false"/>
		   <PARAM NAME="spear.keyassigner" VALUE="com.cs.sg.spear.impl.assigner.RoundRobinKeyAssigner"/>
		   <PARAM NAME="spear.process.name" VALUE="SPEAR_TMS_JP"/>
		   <PARAM NAME="spear.run.interval" VALUE="10000"/>
  		   <PARAM NAME="spear.shutdown.format" VALUE="HH:mm"/>
		   <PARAM NAME="spear.shutdown" VALUE="16:04"/>
		   <PARAM NAME="spear.cycle.count" VALUE="1"/>
		</MODULE-PARAM>
	</MODULE>
	
	<DATA-EXTRACTOR NAME="dbextractor" CLASS="com.cs.sg.spear.impl.extractor.DBDataExtractor">
		<PARAM NAME="data.provider" VALUE="brinvoice"/>
	</DATA-EXTRACTOR>

	<DATA-TRANSFORMER NAME="String" CLASS="com.cs.sg.spear.impl.transformer.DefaultDataTransformer" POOL-SIZE="150" THREAD-COUNT="5">
	</DATA-TRANSFORMER>

	<DATA-WRITERS ON-ERROR="ignore" THREAD-COUNT="1">
		<WRITER NAME="writer1" CLASS="com.cs.sg.spear.impl.writer.DBDataWriter" >
			<PARAM NAME="single.reference" VALUE="true"/>
			<PARAM NAME="data.provider" VALUE="updater1"/>
			<PARAM NAME="key.name" VALUE="writer1"/>
		</WRITER>
		<WRITER NAME="writer2" CLASS="com.cs.sg.spear.impl.writer.DBDataWriter" >
			<PARAM NAME="single.reference" VALUE="false"/>
			<PARAM NAME="data.provider" VALUE="updater2"/>
			<PARAM NAME="key.name" VALUE="writer2"/>
		</WRITER>
		<WRITER NAME="writer3" CLASS="com.cs.sg.spear.impl.writer.DBDataWriter" >
			<PARAM NAME="single.reference" VALUE="false"/>
			<PARAM NAME="data.provider" VALUE="updater3"/>
			<PARAM NAME="key.name" VALUE="writer3"/>
		</WRITER>
		<WRITER NAME="writer4" CLASS="com.cs.sg.spear.impl.writer.DBDataWriter" >
			<PARAM NAME="single.reference" VALUE="false"/>
			<PARAM NAME="data.provider" VALUE="updater4"/>
			<PARAM NAME="key.name" VALUE="writer4"/>
		</WRITER>
	</DATA-WRITERS>
<RESOURCES>
		<RESOURCE NAME="DSGINS71" TYPE="DB">
			<PARAM NAME="driverClassName" VALUE="oracle.jdbc.OracleDriver"/>
			<PARAM NAME="connectionUrl" VALUE="jdbc:oracle:thin:@(description=(address_list= (address=(host=DSGINS71) (protocol=tcp)(port=1522))(address=(host=DSGINS72)(protocol=tcp) (port=1522)) (load_balance=no)(failover=yes))(connect_data=(service_name= DSGINS70.WORLD)))"/>
			<PARAM NAME="userName" VALUE="inspire_dev"/>
			<PARAM NAME="password" VALUE="jakarta80"/>
			<PARAM NAME="poolSize" VALUE="25"/>
			<PARAM NAME="maxWait" VALUE="5000"/>
			<PARAM NAME="defaultAutoCommit" VALUE="true"/>
		</RESOURCE>
	</RESOURCES>
<SERVICES>
		<SERVICE NAME="semaphore" CLASS="com.cs.sg.spear.impl.services.DBSemaphoreService" CYCLE-NOTIFICATION="true" APP-NOTIFICATION="true" DEPENDS="s1">
			<PARAM NAME="check.status" VALUE="semaphore_select"/>
			<PARAM NAME="update.status" VALUE="semaphore_update"/>			
			<PARAM NAME="pre.start.status" VALUE="C"/>
			<PARAM NAME="post.start.status" VALUE="P"/>
			<PARAM NAME="end.status" VALUE="C"/>
			<PARAM NAME="termination.status" VALUE="K"/>
		</SERVICE>
		<SERVICE NAME="s1" CLASS="com.cs.sg.spear.core.services.TestService" CYCLE-NOTIFICATION="true" APP-NOTIFICATION="true"/>
		<SERVICE NAME="s2" CLASS="com.cs.sg.spear.core.services.TestService" CYCLE-NOTIFICATION="true" APP-NOTIFICATION="true" DEPENDS="s5"/>
		<SERVICE NAME="s3" CLASS="com.cs.sg.spear.core.services.TestService" CYCLE-NOTIFICATION="true" APP-NOTIFICATION="true" DEPENDS="s5"/>
		<SERVICE NAME="s4" CLASS="com.cs.sg.spear.core.services.TestService" CYCLE-NOTIFICATION="true" APP-NOTIFICATION="true" DEPENDS="s2"/>
		<SERVICE NAME="s5" CLASS="com.cs.sg.spear.core.services.TestService" CYCLE-NOTIFICATION="true" APP-NOTIFICATION="true" DEPENDS="s1"/>
	</SERVICES>	
	<DATA-PROVIDERS>
		<DATA-PROVIDER NAME="brinvoice" TYPE="DB">
			<QUERY DB-SOURCE="DSGINS71" FETCH-SIZE="0" RESULT-WRAP="connected"><![CDATA[ select * from BR_INV_INVOICE where INV_BUSINESS_STATUS='PD' ]]>			</QUERY>
		</DATA-PROVIDER>
		<DATA-PROVIDER NAME="counterparty" TYPE="DB">
			<QUERY DB-SOURCE="DSGINS71" FETCH-SIZE="0" RESULT-WRAP="connected"><![CDATA[ select * from IN_CNP_CNTR_PARTY where rownum <4]]>			</QUERY>
			<PARAM NAME="cache.type" VALUE="begin.app"/>
		</DATA-PROVIDER>
		<DATA-PROVIDER NAME="entity" TYPE="DB">
			<QUERY DB-SOURCE="DSGINS71" FETCH-SIZE="0" RESULT-WRAP="connected"><![CDATA[ select * from IN_ENT_ENTITY ]]></QUERY>
			<PARAM NAME="cache.type" VALUE="begin.app"/>
		</DATA-PROVIDER>
		<DATA-PROVIDER NAME="nostro" TYPE="DB">
			<QUERY DB-SOURCE="DSGINS71" FETCH-SIZE="0" RESULT-WRAP="connected"><![CDATA[ select * from IN_NOS_NOSTRO ]]></QUERY>
			<PARAM NAME="cache.type" VALUE="begin.app"/>
		</DATA-PROVIDER>	
		<DATA-PROVIDER NAME="curreny" TYPE="DB">
			<QUERY DB-SOURCE="DSGINS71" FETCH-SIZE="0" RESULT-WRAP="connected"><![CDATA[ select * from IN_CUR_CURRENCY ]]></QUERY>
			<PARAM NAME="cache.type" VALUE="begin.app"/>
		</DATA-PROVIDER>	
		<DATA-PROVIDER NAME="semaphore_select" TYPE="DB">
			<QUERY DB-SOURCE="DSGINS71" FETCH-SIZE="0" RESULT-WRAP="disconnected"><![CDATA[ select PROC_STATUS from SPR_TEST ]]></QUERY>
		</DATA-PROVIDER>
		<DATA-PROVIDER NAME="ssi" TYPE="DB">
			<QUERY DB-SOURCE="DSGINS71" FETCH-SIZE="0" RESULT-WRAP="connected"><![CDATA[ select * from IN_SSI_STAN_SETTLE_INSTR ]]></QUERY>
			<PARAM NAME="cache.type" VALUE="begin.app"/>
		</DATA-PROVIDER>
		<DATA-PROVIDER NAME="semaphore_update" TYPE="DB">
			<QUERY DB-SOURCE="DSGINS71"><![CDATA[ update SPR_TEST set PROC_STATUS=?,MOD_DATETIME=SYSDATE where PROCESS_NAME='SPR_TEST' ]]></QUERY>
		</DATA-PROVIDER>		
		<DATA-PROVIDER NAME="updater1" TYPE="DB">
			<QUERY DB-SOURCE="DSGINS71"><![CDATA[ update BR_INV_INVOICE set INV_BUSINESS_STATUS=? where INV_ID=? ]]></QUERY>
		</DATA-PROVIDER>
		<DATA-PROVIDER NAME="updater4" TYPE="DB">
			<QUERY DB-SOURCE="DSGINS71"><![CDATA[ update BR_INV_INVOICE set INV_MOD_BY='%%processname%%' where INV_ID=? ]]></QUERY>
		</DATA-PROVIDER>
		<DATA-PROVIDER NAME="updater2" TYPE="DB">
			<QUERY DB-SOURCE="DSGINS71"><![CDATA[ INSERT INTO BR_FOTS_FOTS_FEED ( BR_FOTS_FOTS_FEED.FOTS_ID, BR_FOTS_FOTS_FEED.FOTS_RISK_ID, BR_FOTS_FOTS_FEED.FOTS_BROKERAGE_AMT, BR_FOTS_FOTS_FEED.FOTS_BROKER_CODE, BR_FOTS_FOTS_FEED.FOTS_PAY_REF, BR_FOTS_FOTS_FEED.FOTS_CREATED_DATETIME, BR_FOTS_FOTS_FEED.FOTS_MODIFIED_DATETIME, BR_FOTS_FOTS_FEED.FOTS_BUSINESS_DATE, BR_FOTS_FOTS_FEED.FOTS_FILE_ID, BR_FOTS_FOTS_FEED.FOTS_BRO3_FLAG, BR_FOTS_FOTS_FEED.FOTS_TRADE_DATE ) 
		 VALUES ( SEQ_BR_STMT_CONV_ID.NEXTVAL, ?, 0, '%%ccy$CUR_ID%%', 'KJDHKJDK', SYSDATE, SYSDATE, ?, %%dbextractor$INV_ID%%, '%%yesno%%', NULL )]]></QUERY>
		</DATA-PROVIDER>
		<DATA-PROVIDER NAME="updater3" TYPE="DB">
			<QUERY DB-SOURCE="DSGINS71"><![CDATA[ delete from BR_FOTSQ_FOTS_FEED where FOTS_FILE_ID=%%dbextractor$INV_ID%%  ]]></QUERY>
		</DATA-PROVIDER>		
	</DATA-PROVIDERS>
	<DATA-LOOKUP>
		<LOOKUP NAME="cp_nos" CLASS="com.cs.sg.spear.impl.lookup.GenericLookupObject" DEPENDS="ssi_counterparty" DATA-PROVIDER="nostro">
			<FILTER><![CDATA[
				columnInt("NOS_ID")=%%ssi_counterparty$SSI_AGENT_BANK_ID%%
			]]>	</FILTER>
			<COLUMNS><![CDATA[
				columnStr("NOS_ID"),columnStr("NOS_NAME"),columnStr("NOS_CODE")
			]]></COLUMNS>
		</LOOKUP>
		<LOOKUP NAME="ent_nos" CLASS="com.cs.sg.spear.impl.lookup.GenericLookupObject" DEPENDS="ssi_entity" DATA-PROVIDER="nostro">
			<FILTER><![CDATA[
				columnInt("NOS_ID")=%%ssi_entity$SSI_AGENT_BANK_ID%%
			]]>	</FILTER>
			<COLUMNS><![CDATA[
				columnStr("NOS_ID"),columnStr("NOS_NAME"),columnStr("NOS_CODE")
			]]></COLUMNS>
		</LOOKUP>

		<LOOKUP NAME="ssi_counterparty" CLASS="com.cs.sg.spear.impl.lookup.GenericLookupObject" DEPENDS="cp" DATA-PROVIDER="ssi">
			<FILTER><![CDATA[
				columnStr("SSI_SENDER_RECEIVER_TYPE")='C' and columnInt("SSI_SENDER_RECEIVER_ID")=%%cp$CNP_ID%% and columnInt("SSI_CURR_ID")=%%ccy$CUR_ID%% and columnStr("SSI_STATUS")!='D'
				]]>
			</FILTER>
		</LOOKUP>
		<LOOKUP NAME="ssi_entity" CLASS="com.cs.sg.spear.impl.lookup.GenericLookupObject" DEPENDS="etty" DATA-PROVIDER="ssi">
			<FILTER><![CDATA[
				columnStr("SSI_SENDER_RECEIVER_TYPE")='E' and columnInt("SSI_SENDER_RECEIVER_ID")=%%etty$ENT_ID%% and columnInt("SSI_CURR_ID")=%%ccy$CUR_ID%% and columnStr("SSI_STATUS")!='D'
				]]>
			</FILTER>
		</LOOKUP>
		<LOOKUP NAME="ccy" CLASS="com.cs.sg.spear.impl.lookup.GenericLookupObject" DEPENDS="" DATA-PROVIDER="curreny">
			<FILTER><![CDATA[
				columnInt("CUR_ID")=%%dbextractor$INV_CCY_ID%%
				]]>
			</FILTER>
		</LOOKUP>
		<LOOKUP NAME="etty" CLASS="com.cs.sg.spear.impl.lookup.GenericLookupObject" DEPENDS="ccy" DATA-PROVIDER="entity">
			<FILTER><![CDATA[
				columnInt("ENT_ID")=%%dbextractor$INV_ENTITY_ID%%
				]]>
			</FILTER>
		</LOOKUP>
		<LOOKUP NAME="cp" CLASS="com.cs.sg.spear.impl.lookup.GenericLookupObject" DEPENDS="ccy" DATA-PROVIDER="counterparty">
			<FILTER><![CDATA[
				columnInt("CNP_ID")=%%etty$INV_BROKER_ID%%
				]]>
			</FILTER>
		</LOOKUP>
	</DATA-LOOKUP>
	<EXCEPTION-HANDLER>
		<HANDLER CLASS="com.cs.sg.spear.core.exception.SpearExceptionHandler" NAME="default.exception.handler"/>
		<HANDLE EXCEPTION="com.cs.sg.spear.core.exception.EventNotifierException" HANDLER="default.exception.handler">
			<ERROR CODE="DBINIT_EA_SQL_EXP" VALUE="" TYPE="fatal"/>
			<ERROR CODE="SEMAPHORE_BA_LOCKED" VALUE="" TYPE="fatal"/>
			<ERROR CODE="SEMAPHORE_BA_PROVIDER_NOT_FOUND" VALUE="" TYPE="fatal"/>
			<ERROR CODE="SEMAPHORE_EA_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="CACHE_PROVIDER_BA_DATA_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="CACHE_PROVIDER_BA_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="CACHE_PROVIDER_EC_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="CACHE_PROVIDER_EC_DATA_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="CACHE_PROVIDER_BC_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="CACHE_PROVIDER_BC_DATA_EXP" VALUE="" TYPE="ignore"/>
		</HANDLE>
	</EXCEPTION-HANDLER>
</SPEAR-CONFIG>
