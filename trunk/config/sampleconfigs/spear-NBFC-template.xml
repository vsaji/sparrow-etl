<?xml version="1.0" encoding="UTF-8"?>
<!--Sample XML file generated by XML Spy v4.4 U (http://www.xmlspy.com)-->
<SPEAR-CONFIG xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="spear.xsd">
	<MODULE>
		<NAME>India_NBFC</NAME>
		<PROCESS-ID>NBFC</PROCESS-ID>
		<DESCRIPTION>For Testing</DESCRIPTION>
		<CYCLE-DEPENDENCIES>
			<ASSERTER CLASS="com.cs.sg.spear.core.cycledependency.SystemGCForcer"/>
			<ASSERTER CLASS="com.cs.sg.spear.core.cycledependency.StatsCollector"/>
		</CYCLE-DEPENDENCIES>
		<MODULE-PARAM>
		   <PARAM NAME="spear.semaphore.check" VALUE="false"/>
		   <PARAM NAME="spear.keyassigner" VALUE="com.cs.sg.spear.impl.assigner.RoundRobinKeyAssigner"/>
		   <PARAM NAME="driver.primary.keys" VALUE="ISIN_SECNO"/>
		   <PARAM NAME="spear.cycle.count" VALUE="1"/>
		</MODULE-PARAM>
	</MODULE>
	<DATA-EXTRACTOR NAME="driver" TYPE="CSV">
		<PARAM NAME="fetch.size" VALUE="500"/>
		<PARAM NAME="result.wrap" VALUE="disconnected"/>
		<PARAM NAME="file.path" VALUE="c:/app/temp"/>
		<PARAM NAME="file.name" VALUE="Data.csv"/>
		<PARAM NAME="file.delimiter" VALUE="comma"/>
	    <PARAM NAME="column.definition" VALUE="coldef_t.xml"/>
		<PARAM NAME="trim.value" VALUE="true"/>
		<PARAM NAME="start.line.number" VALUE="1"/>
		<PARAM NAME="fail.dir" VALUE="c:/app/temp"/>
	</DATA-EXTRACTOR>
	
	<DATA-TRANSFORMER NAME="fitTransform" POOL-SIZE="150" THREAD-COUNT="5" />

	<DATA-WRITERS ON-ERROR="ignore" THREAD-COUNT="1">
		<WRITER NAME="dbwrite1" TYPE="TEST" >
			<PARAM NAME="query"><![CDATA[insert into iiPriceList Values ('',${driver$CSFBJL_SECNO}, '1/1/1900',0,0,getdate(), ${prc$mid}, 0, 0, 'dummy', getdate(), 'dummy', getdate())  ]]>
			</PARAM>
			<PARAM NAME="resource" VALUE="SYB"/>		
			<PARAM NAME="batch.size" VALUE="300"/>		
		</WRITER>
		<WRITER NAME="filebackout" TYPE="FILE" >
			<PARAM NAME="file.close.event" VALUE="end.app"/>
			<PARAM NAME="file.path" VALUE="c:/app/temp"/>
			<PARAM NAME="file.name" VALUE="nbfc.txt"/>
			<PARAM NAME="all.or.none" VALUE="true"/>		
			<PARAM NAME="async.write" VALUE="true"/>		
			<PARAM NAME="file.output" VALUE="single"/>		
			<PARAM NAME="flush.type" VALUE="request"/>
			<PARAM NAME="body.row"><![CDATA[insert into PriceList Values ('',${driver$CSFBJL_SECNO}, '${prc$gloss}','${prc$book}','${prc$product_type}',getdate(), ${prc$mid}, 0, 0, 'dummy', getdate(), 'dummy', getdate())]]></PARAM>
			<PARAM NAME="key.name" VALUE="backout"/>
		</WRITER>

	</DATA-WRITERS>
	
	<RESOURCES>
		<RESOURCE NAME="MSSQL" TYPE="DB" LOAD-PRIORITY="2" UNLOAD-PRIORITY="1">
			<PARAM NAME="driver.classname" VALUE="com.microsoft.jdbc.sqlserver.SQLServerDriver"/>
			<PARAM NAME="connection.url" VALUE="jdbc:microsoft:sqlserver://MLON12P11020A"/>
			<PARAM NAME="user.name" VALUE="irp_readonly"/>
			<PARAM NAME="password" VALUE="irpropw"/>
			<PARAM NAME="pool.size" VALUE="5"/>
			<PARAM NAME="pool.on.start" VALUE="true"/>
			<PARAM NAME="default.autocommit" VALUE="true"/>
		</RESOURCE>

		<RESOURCE NAME="SYB" TYPE="DB" LOAD-PRIORITY="3" UNLOAD-PRIORITY="1">
		<PARAM NAME="driver.classname" VALUE="com.sybase.jdbc2.jdbc.SybDriver"/>
		<PARAM NAME="connection.url" VALUE="jdbc:sybase:Tds:167.168.148.202:2336/ti_hk_db"/>
		<PARAM NAME="user.name" VALUE="app_ti"/>
		<PARAM NAME="password" VALUE="app_ti"/>
		<PARAM NAME="pool.size" VALUE="5"/>
		<PARAM NAME="pool.on.start" VALUE="false"/>
		<PARAM NAME="max.wait" VALUE="5000"/>
		<PARAM NAME="default.autocommit" VALUE="true"/>
		</RESOURCE>

	</RESOURCES>	
	<DATA-PROVIDERS>
		  <DATA-PROVIDER NAME="price" TYPE="DB">
		   <PARAM NAME="query"><![CDATA[Select * from secnet_prices..sn_price_citibank where currency='USD']]></PARAM>
		   <PARAM NAME="resource" VALUE="MSSQL"/>
		   <PARAM NAME="fetch.size" VALUE="50"/>
		   <PARAM NAME="result.wrap" VALUE="disconnected"/>
			<PARAM NAME="cache.type" VALUE="incremental"/>
		  </DATA-PROVIDER>
	</DATA-PROVIDERS>
	<DATA-LOOKUP>
		<LOOKUP NAME="prc"  DATA-PROVIDER="price">
			<FILTER>isin=${driver$ISIN_SECNO}</FILTER>
		</LOOKUP>
	</DATA-LOOKUP>	
		<EXCEPTION-HANDLER>
		<HANDLER CLASS="com.cs.sg.spear.core.exception.SpearExceptionHandler" NAME="default.exception.handler"/>
		<HANDLE EXCEPTION="com.cs.sg.spear.core.exception.EventNotifierException" HANDLER="default.exception.handler">
			<ERROR CODE="DBINIT_EA_SQL_EXP" VALUE="" TYPE="fatal"/>
			<ERROR CODE="SEMAPHORE_BA_LOCKED" VALUE="" TYPE="fatal"/>
			<ERROR CODE="SEMAPHORE_UNKNOWN" VALUE="" TYPE="fatal"/>
			<ERROR CODE="SEMAPHORE_BA_PROVIDER_NOT_FOUND" VALUE="" TYPE="fatal"/>
		</HANDLE>
		<HANDLE EXCEPTION="com.cs.sg.spear.core.exception.InitializationException" HANDLER="default.exception.handler">
			<ERROR CODE="TOKEN_DBPARAM_EXIST" VALUE="" TYPE="ignore"/>
			<ERROR CODE="APP_INITIALIZATION_EXP" VALUE="" TYPE="fatal"/>
			<ERROR CODE="LOCALJMS_INIT_EXP" VALUE="" TYPE="ignore"/>
		</HANDLE>
		<HANDLE EXCEPTION="com.cs.sg.spear.core.exception.SpearRuntimeException" HANDLER="default.exception.handler">
			<ERROR CODE="FILE_NOT_ARRIVED" VALUE="" TYPE="fatal"/>
		</HANDLE>
		<HANDLE EXCEPTION="java.sql.SQLException" HANDLER="default.exception.handler">
			<ERROR CODE="any" VALUE="Invalid column name" TYPE="fatal"/>
			<ERROR CODE="any" VALUE="invalid identifier" TYPE="ignore"/>
			<ERROR CODE="00001" VALUE="unique constraint" TYPE="fatal"/>
		</HANDLE>
		<HANDLE EXCEPTION="com.cs.sg.spear.core.exception.ValidatorException" HANDLER="default.exception.handler">
			<ERROR CODE="INVALID_FILE" VALUE="" TYPE="fatal"/>
		</HANDLE>
		<HANDLE EXCEPTION="com.cs.sg.spear.core.exception.ResourceException" HANDLER="default.exception.handler">
			<ERROR CODE="SQL_EXCEPTION_CON" VALUE="" TYPE="fatal"/>
			<ERROR CODE="DB_DATASOURCE_CREATION" VALUE="" TYPE="fatal"/>
			<ERROR CODE="DB_BATCH_NOT_SUPPORT" VALUE="" TYPE="fatal"/>
		</HANDLE>
	</EXCEPTION-HANDLER>
</SPEAR-CONFIG>