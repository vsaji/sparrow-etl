<?xml version="1.0" encoding="UTF-8"?>
<!--Sample XML file generated by XML Spy v4.4 U (http://www.xmlspy.com)-->
<SPEAR-CONFIG xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="C:\app\DB-FOBOCA\schema\spear_NEW.xsd">
	<MODULE>
		<NAME>Test Application</NAME>
		<DESCRIPTION>For Testing</DESCRIPTION>
		<CYCLE-DEPENDENCIES>
			<ASSERTER CLASS="com.cs.sg.spear.core.cycledependency.ShutdownTimeCheckDependant"/>
			<ASSERTER CLASS="com.cs.sg.spear.core.cycledependency.EndCycleCheckDependant"/>
			<ASSERTER CLASS="com.cs.sg.spear.core.cycledependency.ProcessTerminationCheckDependant"/>
			<ASSERTER CLASS="com.cs.sg.spear.core.cycledependency.CycleCountCheckDependant"/>
			<ASSERTER CLASS="com.cs.sg.spear.core.cycledependency.SystemGCForcer"/>
			<ASSERTER CLASS="com.cs.sg.spear.core.cycledependency.StatsCollector"/>
		</CYCLE-DEPENDENCIES>
		<MODULE-PARAM>
		   <PARAM NAME="spear.semaphore.check" VALUE="false"/>
		   <PARAM NAME="spear.keyassigner" VALUE="com.cs.sg.spear.impl.assigner.RoundRobinKeyAssigner"/>
		   <PARAM NAME="spear.cycle.interval" VALUE="3000"/>
  		   <PARAM NAME="spear.shutdown.format" VALUE="HH:mm"/>
		   <PARAM NAME="spear.shutdown" VALUE="16:04"/>
		   <PARAM NAME="driver.primary.keys" VALUE="TradeNumber"/>
		   <PARAM NAME="spear.cycle.count" VALUE="-1"/>
		</MODULE-PARAM>
	</MODULE>
	<DATA-EXTRACTOR NAME="csvextractor">
		<PARAM NAME="data.provider" VALUE="dbtest"/>
	</DATA-EXTRACTOR>
	<DATA-TRANSFORMER NAME="trans" CLASS="com.cs.sg.spear.impl.transformer.TemplateBasedTransformer" POOL-SIZE="150" THREAD-COUNT="1" >
		<PARAM NAME="template.type" VALUE="batch.string"/>
		<PARAM NAME="placeholder" VALUE="object"/>	
		<PARAM NAME="template.value.1" VALUE="${driver$TradeNumber},${driver$OriginalTradeNumber}-${driver$TransactionStatus},${ccy$ccyDesc},${stl$settle_desc},${cncl$reason_desc},${trdtype$description},${driver$ShortSellInd},${driver$Is15A6Eligible}-${driver$IssueSettleFXRate},${driver$CustomerType},${driver$NumberOfCharges}-${driver$NoOfRoles},${driver$OrderId},${ent$entity_name},${driver$PublisherId}-${driver$InputDate},${driver$SentToNYVE}"/>
		<PARAM NAME="template.value.2" VALUE="${driver$TradeNumber},${driver$OriginalTradeNumber},${driver$TransactionStatus},${driver$CancelIndicator},${driver$ProductCode},${driver$ProductCodeRefType},${driver$ProductType},${driver$TraderCode},${ccy$ccyDesc},${driver$SettleCurrency},${driver$TradeEntryUser},${driver$NetGrossInd},${stl$settle_desc},${driver$TradeDate},${driver$SettleDate},${driver$TotalQuantity},${driver$BuySellInd},${driver$AveragePriceFlag},${driver$ShortSellInd},${driver$Is15A6Eligible},${driver$IssueSettleFXRate},${driver$CustomerType},${driver$NumberOfCharges},${driver$NoOfRoles},${driver$TypeOfTrade},${driver$AgencyPrincipalInd},${driver$NoOfExecutions},${driver$OrderDateTime},${cncl$reason_desc},${trdtype$description},${driver$OrderId},${driver$AllocationId},${driver$LegId},${driver$TradeNumberVersion},${driver$MarketCode},${driver$NoOfLinks},${driver$CustomerCode},${driver$SalesRepCode},${driver$BrokerCode},${ent$entity_name},${driver$PublisherId},${driver$InputDate},${driver$SentToNYVE}"/>
		<PARAM NAME="template.value.3" VALUE="${driver$TradeNumber},${driver$OriginalTradeNumber},${driver$TransactionStatus},${ccy$ccyDesc},${stl$settle_desc},${cncl$reason_desc},${trdtype$description},${driver$OrderId},${ent$entity_name},${driver$PublisherId},${driver$InputDate},${driver$SentToNYVE}"/>
		<PARAM NAME="ignore.null" VALUE="true"/>
		<PARAM NAME="group.output" VALUE="false"/>
		<PARAM NAME="replace.null.with" VALUE="[NULL]"/>
		<PARAM NAME="rejection.report.type" VALUE="file"/>
		<PARAM NAME="rejection.report.source" VALUE="C:/app/spearnew/test/csv/report"/>
	</DATA-TRANSFORMER>
	<DATA-WRITERS ON-ERROR="ignore" THREAD-COUNT="5">
		<WRITER NAME="dbupdate" CLASS="com.cs.sg.spear.impl.writer.DBDataWriter" DEPENDS="filewrite4">
			<PARAM NAME="single.reference" VALUE="false"/>
			<PARAM NAME="data.provider" VALUE="updt"/>
			<PARAM NAME="batch.size" VALUE="50"/>
		</WRITER>
		<WRITER NAME="filewrite1" CLASS="com.cs.sg.spear.impl.writer.FileWriter">
			<PARAM NAME="single.reference" VALUE="false"/>
			<PARAM NAME="file.close.event" VALUE="end.application"/>
			<PARAM NAME="file.path" VALUE="C:/app/spearnew/test/csv/src"/>
			<PARAM NAME="file.name" VALUE="sybase1.csv"/>
			<PARAM NAME="all.or.none" VALUE="true"/>		
			<PARAM NAME="async.write" VALUE="false"/>		
			<PARAM NAME="file.output" VALUE="single"/>		
			<PARAM NAME="header.row.1" VALUE="HEADER,TEST,${CURRENT_DATE#yyyyddMM}"/>		
			<PARAM NAME="header.row.2" VALUE="col1,col1,col1,col1,col1,col1,col1,col1,col1,col1,col1,col1,col1,col1,col1,col1,col1,col1,"/>	
			<PARAM NAME="footer.row" VALUE="FOOTER,${RECORD_COUNT}"/>		
			<PARAM NAME="flush.type" VALUE="end.cycle"/>
			<PARAM NAME="key.name" VALUE="template.value.1"/>
		</WRITER>
		<WRITER NAME="filewrite2" CLASS="com.cs.sg.spear.impl.writer.FileWriter" DEPENDS="filewrite1">
			<PARAM NAME="single.reference" VALUE="false"/>
			<PARAM NAME="file.close.event" VALUE="end.process"/>
			<PARAM NAME="file.path" VALUE="C:/app/spearnew/test/csv/src"/>
			<PARAM NAME="file.name" VALUE="sybase2.csv"/>
			<PARAM NAME="all.or.none" VALUE="true"/>		
			<PARAM NAME="async.write" VALUE="false"/>		
			<PARAM NAME="file.output" VALUE="single"/>		
			<PARAM NAME="header.row.1" VALUE="HEADER,TEST,${CURRENT_DATE#yyyyddMM}"/>		
			<PARAM NAME="footer.row" VALUE="FOOTER,${RECORD_COUNT}"/>		
			<PARAM NAME="flush.type" VALUE="end.cycle"/>
			<PARAM NAME="key.name" VALUE="template.value.2"/>
		</WRITER>
		<WRITER NAME="filewrite3" CLASS="com.cs.sg.spear.impl.writer.FileWriter" DEPENDS="filewrite2">
			<PARAM NAME="single.reference" VALUE="false"/>
			<PARAM NAME="file.close.event" VALUE="end.application"/>
			<PARAM NAME="file.path" VALUE="C:/app/spearnew/test/csv/src"/>
			<PARAM NAME="file.name" VALUE="sybase3.csv"/>
			<PARAM NAME="all.or.none" VALUE="true"/>		
			<PARAM NAME="async.write" VALUE="true"/>		
			<PARAM NAME="file.output" VALUE="single"/>		
			<PARAM NAME="header.row.1" VALUE="HEADER,TEST,${CURRENT_DATE#yyyyddMM}"/>		
			<PARAM NAME="footer.row" VALUE="FOOTER,${RECORD_COUNT}"/>		
			<PARAM NAME="flush.type" VALUE="end.cycle"/>
			<PARAM NAME="key.name" VALUE="template.value.3"/>
		</WRITER>
		<WRITER NAME="filewrite4" CLASS="com.cs.sg.spear.impl.writer.FileWriter" DEPENDS="filewrite3">
			<PARAM NAME="single.reference" VALUE="false"/>
			<PARAM NAME="file.close.event" VALUE="end.process"/>
			<PARAM NAME="file.path" VALUE="C:/app/spearnew/test/csv/src"/>
			<PARAM NAME="file.name" VALUE="sybase4.csv"/>
			<PARAM NAME="all.or.none" VALUE="true"/>		
			<PARAM NAME="async.write" VALUE="true"/>		
			<PARAM NAME="file.output" VALUE="single"/>		
			<PARAM NAME="header.row.1" VALUE="HEADER,TEST,${CURRENT_DATE#yyyyddMM}"/>		
			<PARAM NAME="footer.row" VALUE="FOOTER,${RECORD_COUNT}"/>		
			<PARAM NAME="flush.type" VALUE="end.cycle"/>
			<PARAM NAME="key.name" VALUE="template.value.2"/>
		</WRITER>
	</DATA-WRITERS>
	<RESOURCES>
		<RESOURCE NAME="LOCALJMS" TYPE="JMS" LOAD-PRIORITY="1" UNLOAD-PRIORITY="2">
			<PARAM NAME="jms.type" VALUE="queue"/>
			<PARAM NAME="provider.url" VALUE="t3://localhost:7001"/>
			<PARAM NAME="initialcontext.factoy" VALUE="weblogic.jndi.WLInitialContextFactory"/>
			<PARAM NAME="connection.factory" VALUE="inspire.queueconnectionfactory"/>
			<PARAM NAME="session.transacted" VALUE="true"/>
			<PARAM NAME="message.ack.type" VALUE="auto"/>
		</RESOURCE>
		<RESOURCE NAME="RF" TYPE="DB" LOAD-PRIORITY="3" UNLOAD-PRIORITY="1">
			<PARAM NAME="driverClassName" VALUE="net.sourceforge.jtds.jdbc.Driver"/>
			<PARAM NAME="connectionUrl" VALUE="jdbc:jtds:sybase://sgs75h-0800.sg.csfb.com:2319/RF"/>
		    <PARAM NAME="userName" VALUE="app_view"/>
		    <PARAM NAME="password" VALUE="app_view"/>
			<PARAM NAME="poolSize" VALUE="25"/>
			<PARAM NAME="maxWait" VALUE="5000"/>
			<PARAM NAME="poolOnStart" VALUE="true"/>
			<PARAM NAME="defaultAutoCommit" VALUE="true"/>
		</RESOURCE>
		<RESOURCE NAME="tradecap" TYPE="DB" LOAD-PRIORITY="3" UNLOAD-PRIORITY="1">
			<PARAM NAME="driverClassName" VALUE="net.sourceforge.jtds.jdbc.Driver"/>
			<PARAM NAME="connectionUrl" VALUE="jdbc:jtds:sybase://sgs75h-0800.sg.csfb.com:2319/tradecap_db"/>
		    <PARAM NAME="userName" VALUE="app_view"/>
		    <PARAM NAME="password" VALUE="app_view"/>
			<PARAM NAME="poolSize" VALUE="25"/>
			<PARAM NAME="maxWait" VALUE="5000"/>
			<PARAM NAME="poolOnStart" VALUE="true"/>
			<PARAM NAME="defaultAutoCommit" VALUE="true"/>
		</RESOURCE>
	</RESOURCES>
<SERVICES>
		<SERVICE NAME="semaphore" CLASS="com.cs.sg.spear.impl.services.DBSemaphoreService" CYCLE-NOTIFICATION="true" APP-NOTIFICATION="true" DEPENDS="s1">
			<PARAM NAME="check.status" VALUE="semaphore_select"/>
			<PARAM NAME="update.status" VALUE="semaphore_update"/>			
			<PARAM NAME="pre.start.status" VALUE="C"/>
			<PARAM NAME="post.start.status" VALUE="P"/>
			<PARAM NAME="end.status" VALUE="C"/>
			<PARAM NAME="termination.status" VALUE="K"/>
		</SERVICE>
		<SERVICE NAME="s1" CLASS="com.cs.sg.spear.core.services.TestService" CYCLE-NOTIFICATION="true" APP-NOTIFICATION="true"/>
	</SERVICES>	
	<DATA-PROVIDERS>
		<DATA-PROVIDER NAME="dbtest" TYPE="DB">
			<QUERY><![CDATA[select * from tradecap_db..CDATrade where MarketCode='TSE' and AveragePriceFlag='N']]></QUERY>
			<PARAM NAME="resource" VALUE="tradecap"/>
			<PARAM NAME="fetch.size" VALUE="500"/>
			<PARAM NAME="result.wrap" VALUE="disconnected"/>
		</DATA-PROVIDER>
		<DATA-PROVIDER NAME="ST_entity" TYPE="DB">
			<QUERY><![CDATA[select * from RF..entity]]></QUERY>
			<PARAM NAME="resource" VALUE="RF"/>
			<PARAM NAME="fetch.size" VALUE="0"/>
			<PARAM NAME="result.wrap" VALUE="disconnected"/>
			<PARAM NAME="cache.type" VALUE="begin.cycle"/>
		</DATA-PROVIDER>
		<DATA-PROVIDER NAME="ST_currency" TYPE="DB">
			<QUERY><![CDATA[select * from RF..Currency]]></QUERY>
			<PARAM NAME="resource" VALUE="RF"/>
			<PARAM NAME="fetch.size" VALUE="0"/>
			<PARAM NAME="cache.type" VALUE="begin.app"/>
		</DATA-PROVIDER>
		<DATA-PROVIDER NAME="ST_tradetype" TYPE="DB">
			<QUERY><![CDATA[select * from RF..trade_type]]></QUERY>
			<PARAM NAME="resource" VALUE="RF"/>
			<PARAM NAME="fetch.size" VALUE="0"/>
			<PARAM NAME="result.wrap" VALUE="disconnected"/>
			<PARAM NAME="cache.type" VALUE="begin.app"/>
		</DATA-PROVIDER>
		<DATA-PROVIDER NAME="ST_settle" TYPE="DB">
			<QUERY><![CDATA[select * from tradecap_db..rte_settle_type]]></QUERY>
			<PARAM NAME="resource" VALUE="tradecap"/>
			<PARAM NAME="fetch.size" VALUE="0"/>
			<PARAM NAME="result.wrap" VALUE="discconnected"/>
			<PARAM NAME="cache.type" VALUE="begin.app"/>
		</DATA-PROVIDER>
		<DATA-PROVIDER NAME="ST_cancel" TYPE="DB">
			<QUERY><![CDATA[select * from tradecap_db..rte_cancel_reason]]></QUERY>
			<PARAM NAME="resource" VALUE="tradecap"/>
			<PARAM NAME="fetch.size" VALUE="0"/>
			<PARAM NAME="result.wrap" VALUE="discconnected"/>
			<PARAM NAME="cache.type" VALUE="begin.app"/>
		</DATA-PROVIDER>
			<DATA-PROVIDER NAME="updt" TYPE="DB">
				<QUERY><![CDATA[
					update tradecap_db..CDATrade set AveragePriceFlag='Y' where MarketCode='TSE' and TradeNumber='${driver$TradeNumber}'
					]]>
				</QUERY>
				<PARAM NAME="resource" VALUE="tradecap"/>
			</DATA-PROVIDER>
	</DATA-PROVIDERS>
	<DATA-LOOKUP>
		<LOOKUP NAME="ccy"  DATA-PROVIDER="ST_currency">
			<FILTER><![CDATA[
				ccyCode=${driver$IssueCurrency}
				]]>
			</FILTER>
		</LOOKUP>
		<LOOKUP NAME="ccy1"  DATA-PROVIDER="ST_currency" DEPENDS="ent">
			<FILTER><![CDATA[
				ccyCode=${ent$base_ccy}
				]]>
			</FILTER>
		</LOOKUP>
		<LOOKUP NAME="ent"  DATA-PROVIDER="ST_entity" >
			<FILTER><![CDATA[
				entity_code=${driver$LegalEntity}
				]]>
			</FILTER>
		</LOOKUP>
		<LOOKUP NAME="trdtype"  DATA-PROVIDER="ST_tradetype">
			<FILTER><![CDATA[
				trade_item_type=${driver$TradeTypeCode}
				]]>
			</FILTER>
		</LOOKUP>
		<LOOKUP NAME="stl"  DATA-PROVIDER="ST_settle">
			<FILTER><![CDATA[
				settle_type=${driver$SettleCode}
				]]>
			</FILTER>
		</LOOKUP>
		<LOOKUP NAME="cncl"  DATA-PROVIDER="ST_cancel">
			<FILTER><![CDATA[
				cxl_reason_code=${driver$CancelReason}
				]]>
			</FILTER>
		</LOOKUP>
	</DATA-LOOKUP>	
	<EXCEPTION-HANDLER>
		<HANDLER CLASS="com.cs.sg.spear.core.exception.SpearExceptionHandler" NAME="default.exception.handler"/>
		<HANDLE EXCEPTION="com.cs.sg.spear.core.exception.EventNotifierException" HANDLER="default.exception.handler">
			<ERROR CODE="DBINIT_EA_SQL_EXP" VALUE="" TYPE="fatal"/>
			<ERROR CODE="SEMAPHORE_BA_LOCKED" VALUE="" TYPE="fatal"/>
			<ERROR CODE="SEMAPHORE_UNKNOWN" VALUE="" TYPE="fatal"/>
			<ERROR CODE="SEMAPHORE_BA_PROVIDER_NOT_FOUND" VALUE="" TYPE="fatal"/>
			<ERROR CODE="MQ_INIT_BEGIN_APP_JMS_EXP" VALUE="" TYPE="fatal"/>
			<ERROR CODE="MQ_INIT_BEGIN_APP_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="JMS_INIT_BEGIN_APP_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="SEMAPHORE_EA_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="CACHE_PROVIDER_BA_DATA_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="CACHE_PROVIDER_BA_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="CACHE_PROVIDER_EC_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="CACHE_PROVIDER_EC_DATA_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="CACHE_PROVIDER_BC_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="CACHE_PROVIDER_BC_DATA_EXP" VALUE="" TYPE="ignore"/>
		</HANDLE>
		<HANDLE EXCEPTION="com.cs.sg.spear.core.exception.InitializationException" HANDLER="default.exception.handler">
			<ERROR CODE="TOKEN_DBPARAM_EXIST" VALUE="" TYPE="ignore"/>
			<ERROR CODE="APP_INITIALIZATION_EXP" VALUE="" TYPE="fatal"/>
			<ERROR CODE="DB_INIT_BEGIN_APP_SQL_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="DB_INIT_BEGIN_APP_EXP" VALUE="" TYPE="ignore"/>
			<ERROR CODE="MANDATORY_PARAM_MISSING" VALUE="" TYPE="ignore"/>
			<ERROR CODE="MW_SESSION_EX" VALUE="" TYPE="fatal"/>
			<ERROR CODE="MORE_THAN_ONE_MATCH" VALUE="" TYPE="fatal"/>
		</HANDLE>
		<HANDLE EXCEPTION="com.cs.sg.spear.core.exception.SpearRuntimeException" HANDLER="default.exception.handler">
			<ERROR CODE="FILE_NOT_ARRIVED" VALUE="" TYPE="fatal"/>
		</HANDLE>
		<HANDLE EXCEPTION="java.sql.SQLException" HANDLER="default.exception.handler">
			<ERROR CODE="any" VALUE="Invalid column name" TYPE="fatal"/>
		</HANDLE>
		<HANDLE EXCEPTION="com.cs.sg.spear.core.exception.ValidatorException" HANDLER="default.exception.handler">
			<ERROR CODE="INVALID_FILE" VALUE="" TYPE="fatal"/>
		</HANDLE>
		<HANDLE EXCEPTION="com.cs.sg.spear.core.exception.ResourceException" HANDLER="default.exception.handler">
			<ERROR CODE="SQL_EXCEPTION_CON" VALUE="" TYPE="fatal"/>
			<ERROR CODE="DB_DATASOURCE_CREATION" VALUE="" TYPE="fatal"/>
			<ERROR CODE="DB_BATCH_NOT_SUPPORT" VALUE="" TYPE="fatal"/>
		</HANDLE>
	</EXCEPTION-HANDLER>
</SPEAR-CONFIG>
